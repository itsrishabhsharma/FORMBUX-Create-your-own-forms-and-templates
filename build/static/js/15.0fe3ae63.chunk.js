(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{144:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(49),r=a(50),o=a(52),l=a(51),s=a(0),i=a.n(s),c=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.bg?this.props.bg:"indigo",a=this.props.size?this.props.size:"xs";return i.a.createElement("button",{onClick:function(){return e.props.onClick?e.props.onClick():function(){}},className:"bg-"+t+"-500 text-white active:bg-"+t+"-600 text-"+a+" font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none mr-1 mb-1",type:"button",style:Object.assign({},{transition:"all .15s ease"},this.props.style)},this.props.children)}}]),a}(s.Component)},146:function(e,t,a){e.exports=a.p+"static/media/empty.2552dd64.png"},454:function(e,t,a){"use strict";a.r(t);var n=a(49),r=a(50),o=a(57),l=a(52),s=a(51),i=a(0),c=a.n(i),p=a(6),d=a(449),u=a(445),m=a(446),f=a(303),h=a(442),b=a(444),g=a(20),x=a(144),v=a(455),y=a(456),w=a(457),E=a(458),k=a(438),C=a(55),F=a(17),N=a.n(F);var S=a(314),A=a(315),O=function(e){Object(l.a)(i,e);var t=Object(s.a)(i);function i(e){var a;return Object(n.a)(this,i),(a=t.call(this,e)).state={isNew:0,openAdd:!1,name:"",loading:!1,activeForm:{},activeResponse:[],responseCols:[],responseData:[]},a.closeAddModal=a.closeAddModal.bind(Object(o.a)(a)),a}return Object(r.a)(i,[{key:"closeAddModal",value:function(){this.setState({openAdd:!1})}},{key:"componentDidMount",value:function(){this.props.getForms(),document.title="DASHBOARD | FORMBUX"}},{key:"ViewForm",value:function(e){e.length>0?this.props.history.push("/view/"+e[e.length-1]._id):d.a.info("Form not published yet",.7)}},{key:"copy",value:function(e){var t=document.getElementById("actlCode");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")}},{key:"deleteForm",value:function(e){var t=null!==localStorage.getItem("forms")?JSON.parse(localStorage.getItem("forms")):[];t.splice(t.findIndex((function(t){return t._id===e})),1),localStorage.setItem("forms",JSON.stringify(t)),this.props.getForms()}},{key:"ceateForm",value:function(){var e=this;this.setState({loading:!0}),C.a.post("forms/add",{name:this.state.name,fields:[]},N.a.load("token")).then((function(t){e.setState({loading:!1}),t.data.status?(e.props.getForms(),e.props.history.push("/form/"+t.data.result)):d.a.error("Form creation failed!",.7)})).catch((function(t){e.setState({loading:!1},(function(){return d.a.error("Form creation failed!",.7)}))}))}},{key:"loadResponse",value:function(e,t){if(e){var a=this.state,n=(a.activeResponse,a.responseCols),r=a.responseData;e[0].fields.map((function(e){"statement"===e.type&&"welcome_screen"===e.type&&"thank_you_screen"===e.type||n.push({title:e.fields[0].value,dataIndex:e.fields[0].value?e.fields[0].value.toLowerCase():null,key:e.fields[0].value?e.fields[0].value.toLowerCase():null,render:function(e){return e||"-"}})})),e.map((function(t,a){var o={};void 0===o.date&&(o.date=S(t.date._d).fromNow()),t.fields.map((function(e){"statement"===e.type&&"welcome_screen"===e.type&&"thank_you_screen"===e.type||(o[e.fields[0].value?e.fields[0].value.toLowerCase():null]=e.fields[0].response)})),r.push(o),a===e.length-1&&n.push({title:"Date",dataIndex:"date",key:"date"})})),console.log(e),this.setState({activeResponse:t,responseCols:n,responseData:r})}}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{title:"CREATE FORM",visible:this.state.openAdd,footer:[],onCancel:function(){return e.closeAddModal()}},0===this.state.isNew?c.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",justifyContent:"space-between",height:"130px"}},c.a.createElement(x.a,{style:{width:"100%"},onClick:function(){return d.a.info("Not Available",.4)},size:"xl"},"chose from template"),c.a.createElement("span",{style:{fontWeight:"bold",fontSize:"1.3em"}},"OR"),c.a.createElement(x.a,{style:{width:"100%"},size:"xl",bg:"pink",onClick:function(){return e.setState({isNew:2})}},"CREATE NEW")):c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.ceateForm()}},c.a.createElement(m.a,{placeholder:"Enter name",required:!0,value:this.state.name,onChange:function(t){e.setState({name:t.target.value})},size:"large",style:{textAlign:"center"}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(x.a,{style:{width:"100%"},onClick:function(){return e.ceateForm()},size:"xl"},this.state.loading?c.a.createElement(k.a,null):"save"))),c.a.createElement("div",{className:"flex flex-wrap mt-4"},c.a.createElement("div",{className:"w-full xl:w-12/12 mb-12 xl:mb-0 px-4"},c.a.createElement("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded"},c.a.createElement("div",{className:"rounded-t mb-0 px-4 py-3 border-0"},c.a.createElement("div",{className:"flex flex-wrap items-center"},c.a.createElement("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1"},c.a.createElement("h3",{className:"font-semibold text-base text-gray-800"},"List")),c.a.createElement("div",{className:"relative w-full px-4 max-w-full flex-grow flex-1 text-right"},c.a.createElement(x.a,{onClick:function(){return e.setState({openAdd:!0})}},"create form")))),c.a.createElement("div",{className:"block w-full overflow-x-auto"},c.a.createElement(f.a,{spinning:this.props.loading},this.props.all&&this.props.all.length>0?c.a.createElement("table",{className:"items-center w-full bg-transparent border-collapse"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left"},"form name"),c.a.createElement("th",{className:"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left"},"Responses"),c.a.createElement("th",{className:"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left"},"Fields"),c.a.createElement("th",{className:"px-6 bg-gray-100 text-gray-600 align-middle border border-solid border-gray-200 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-no-wrap font-semibold text-left"},"Action"))),c.a.createElement("tbody",null,this.props.all?this.props.all.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("th",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4 text-left"},t.name),c.a.createElement("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4"},t.response&&t.response.length>0?c.a.createElement("a",{href:"#",onClick:function(a){a.preventDefault(),e.loadResponse(t.response,t.name)}},t.response.length):0),c.a.createElement("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4"},t.fields?t.fields.length:0),c.a.createElement("td",{className:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-no-wrap p-4"},c.a.createElement(v.a,{onClick:function(){e.props.history.push("/form/"+t._id)},style:{fontSize:"1.7em",cursor:"pointer"}}),c.a.createElement(h.a,{title:"Are you sure delete this form?",onConfirm:function(){e.deleteForm(t._id)},okText:"Yes",cancelText:"No"},c.a.createElement(y.a,{style:{fontSize:"1.5em",marginLeft:"8px",color:"red",cursor:"pointer"}})),c.a.createElement(w.a,{onClick:function(){return e.ViewForm(t.published)},style:{fontSize:"1.6em",marginLeft:"8px",color:"blue",cursor:"pointer"}}),c.a.createElement(E.a,{style:{fontSize:"1.5em",marginLeft:"8px",color:"grey",cursor:"pointer"},onClick:function(){t.published.length>0?e.setState({activeForm:t}):d.a.info("not published",.6)}})))})):c.a.createElement("span",null,"Your forms will appear here"))):c.a.createElement("div",{style:{textAlign:"center",paddingBottom:"2em"}}," ",c.a.createElement("img",{src:a(146),style:{width:"340px",display:"block",margin:"0 auto"}}),c.a.createElement("span",{style:{fontWeight:"400",fontSize:"1.5em"}},"Your forms will appear here"))))))),c.a.createElement(u.a,{visible:this.state.activeForm._id,title:"Embed This Form",onCancel:function(){e.setState({activeForm:{}})},footer:[]},c.a.createElement(c.a.Fragment,null,c.a.createElement(A.CopyToClipboard,{text:this.state.activeForm.published?'<script src="https://formbux.herokuapp.com/static/widget.js"> <\/script><script>callChatUI("https://formbux.herokuapp.com/v2/'+this.state.activeForm.published[this.state.activeForm.published.length-1]._id+'");<\/script>':null,onCopy:function(){return d.a.info("Copied",.5)}},c.a.createElement("span",{style:{cursor:"pointer",color:"pink",fontWeight:"bold"}},"COPY")),c.a.createElement("div",{className:"codeS"},this.state.activeForm.published?c.a.createElement("em",{style:{userSelect:"text"},id:"actlCode"},'<script src="https://formbux.herokuapp.com/static/widget.js"> <\/script><script>callChatUI("https://formbux.herokuapp.com/v2/'+this.state.activeForm.published[this.state.activeForm.published.length-1]._id+'");<\/script>'.toString()):null))),c.a.createElement(u.a,{onCancel:function(){e.setState({activeResponse:[],responseCols:[],responseData:[]})},visible:this.state.activeResponse.length>0,footer:[],title:this.state.activeResponse,style:{width:"auto"},className:"responseTable"},c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{columns:this.state.responseCols,dataSource:this.state.responseData}))),c.a.createElement("style",{jsx:!0},"\n                  .codeS{\n                     background-color: grey;\n                     color: white;\n                     padding: 2em;\n                     border-radius: 9px;\n                  }\n                  .Copies{\n                    padding: 1em;\n                    top: 67px;\n                    right: 19px;\n                    position: absolute;\n                    cursor: pointer;\n                  }\n\n                  .ant-modal.responseTable {\n                    width: auto !important;\n                }\n                  \n                  "))}}]),i}(c.a.Component);t.default=Object(p.h)(Object(g.b)((function(e){return e.formReducer}),(function(e){return{ceateForm:function(t,a){e({type:"create_form",payload:{name:t,history:a}})},getForms:function(){e(function(e){var t=N.a.load("token");return function(e){return C.a.get("forms/all",t).then((function(t){e({type:"getAllForms",payload:{forms:t.data.result}})})).catch((function(e){return console.log(e)}))}}())}}}))(O))},55:function(e,t,a){"use strict";var n,r=a(49),o=a(89),l=a.n(o);n="https://formbux.herokuapp.com/api/";t.a=new function e(){Object(r.a)(this,e),this.post=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r,o){var s={Authorization:"Bearer "+a};l.a.post(n+e,t,null!==a?{headers:s}:void 0).then((function(e){r(e)})).catch((function(e){o(e)}))}))},this.get=function(e,t){return new Promise((function(a,r){var o={Authorization:"Bearer "+t};l.a.get(n+e,{headers:o}).then((function(e){a(e)})).catch((function(e){r(e)}))}))},this.delete=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(r,o){var s={Authorization:"Bearer "+a};l.a.delete(n+e,t,null!==a?{headers:s}:void 0).then((function(e){r(e)})).catch((function(e){o(e)}))}))}}}}]);
//# sourceMappingURL=15.0fe3ae63.chunk.js.map